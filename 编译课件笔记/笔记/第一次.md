# 绪论

1、高级语言工作原理
2、编译程序构造，常用优化技术。

## 1、基本概念
低级语言：与特定机器有关，功效高，但复杂，易出错

高级语言：不依赖于具体机器，移植性好，对用户要求低，易使用易维护

翻译程序：将源程序翻译成目标程序（高级语言翻译成低级语言）
 - 汇编语言与机器是一一对应，表现形式不同。源程序由汇编语言所写
 - 汇编程序由于与机器程序一一对应，所以打表处理即可
 - 编译程序：源程序由高级语言所写

两个阶段：编译阶段+运行阶段
编译阶段将 源程序 通过 编译程序 变为 目标程序 （笔译）
运行阶段将输入数据通过（目标程序+运行子程序）（即：“解释程序”）得到输出结果 （口译）
javascript是解释程序，JIT编译器
现在一般将编译和解释器结合

**五个阶段**：
词法分析，语法分析，语义分析+生成中间代码，代码优化程序，生成目标程序
1. 词法分析：分析和识别单词 token；根据语言的词法规则分析并识别单词
   stdio.h算一个单词；
   单词分为四部分：关键词/保留字，分界符，常量，标识符（常量名，变量名，函数名）
   注释什么都不算
2. 语法分析：根据语法规则，分析识别各种语法的成分，如表达式，函数，说明语句等，并进行语法正确性检查。
3. 语义分析，产生相应中间代码
    介于源语言和目标语言之间的中间形式
    目的：优化处理，便于编译程序的移植。中间代码不依赖于目标计算机。
    中间代码的形式：四元式，三元式，逆波兰式，LLVM IR等。

    四元式：三地址指令，排序为：运算符  左运算对象 右运算对象 结果
4. 代码优化，中间代码格式不改变

每个阶段都要做两件事：建表查表（符号表管理），出错处理

PASS：遍
对源程序包括中间形式从头到尾做一遍处理，生成新的源程序中间形式或目标程序，叫做 一遍
上一遍的结果是下一遍的输入。

注：遍和阶段不同
存在一遍扫描即可完成整个编译工作，称为“一遍扫描编译程序”。

**前端和后端**：
以中间程序为基准，分为前后端
前端：与源语言有关，分析部分。代码优化之前
（事实上，现代的代码优化器分为机器无关代码优化器（中端）和机器相关代码优化器）
后端：与目标机有关；

现代前端前面还有一个预处理器，框架源程序通过预处理器后变成源程序。例如：
```c
#include<stdio.h>
#define PI 3.14
void main{
    printf("%lf",PI);
}
```
含有“#”的指令是预编译指令，上述代码会先进行预编译，编译后生成汇编程序，包括可重定位机器码（obj文件）